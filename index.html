<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xyla.</title>
    <link rel="icon" type="image/png" href="assets/XylaLogo.png">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto Mono', monospace;
            background-color: white;
            color: black;
            overflow-x: hidden;
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE 10+ */
        }
        body::-webkit-scrollbar {
            width: 0 !important;
            display: none;
        }

        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 1rem 1.5rem;
            z-index: 100;
            font-size: 0.9rem;
            font-weight: 400;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-link {
            background: none;
            border: none;
            font-family: 'Roboto Mono', monospace;
            font-size: 0.9rem;
            font-weight: 400;
            cursor: pointer;
            color: black;
            text-decoration: none;
            transition: opacity 0.3s;
        }

        .header-link:hover {
            opacity: 0.7;
        }

        .header-link::before {
            content: '[';
        }

        .header-link::after {
            content: ']';
        }

        .hero-container {
            height: 100vh;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .hero-content {
            width: 100%;
            padding: 0 1.5rem;
            text-align: center;
            transition: transform 0.1s linear;
            margin-bottom: 4rem;
        }

        .outlined-text {
            font-size: clamp(3rem, 12vw, 7rem);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: -0.05em;
            color: transparent;
            -webkit-text-stroke: 1.5px black;
            margin-bottom: 1rem;
        }

        .subtitle {
            font-size: clamp(1.2rem, 4vw, 2rem);
            font-style: italic;
            letter-spacing: -0.02em;
            max-width: 600px;
            margin: 0 auto;
            transition: opacity 0.3s;
        }

        .arrow-container {
            position: absolute;
            bottom: 2rem;
            left: 0;
            width: 100%;
            text-align: center;
            z-index: 10;
        }

        .scroll-arrow {
            font-size: 2rem;
            animation: bounce 1.5s infinite;
            opacity: 1;
            transition: opacity 0.3s;
            display: inline-block;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-15px); }
            60% { transform: translateY(-7px); }
        }

        .scroll-arrow.hidden {
            opacity: 0;
        }

        .problem-section {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding-top: 2rem;
            opacity: 0;
            pointer-events: none;
            transition: transform 0.5s, opacity 0.5s;
        }

        .problem-line {
            font-size: 2rem;
            font-weight: 400;
            max-width: 900px;
            margin: 2rem 0;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s cubic-bezier(0.16, 1, 0.3, 1), transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            text-align: center;
            padding: 0 1.5rem;
            will-change: opacity, transform;
        }

        .reframe-section {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: flex-start;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s;
            padding-left: 3rem;
        }

        .reframe-container {
            display: flex;
            align-items: baseline;
            margin-bottom: 3rem;
            text-align: left;
        }

        .reframe-line {
            font-size: 2.2rem;
            margin-right: 0.5rem;
        }

        .dots {
            display: flex;
            align-items: flex-end;
            height: 2.2rem;
            padding-bottom: 0.3rem;
        }

        .dot {
            width: 6px;
            height: 6px;
            background-color: black;
            border-radius: 50%;
            margin: 0 2px;
            opacity: 0;
            transform: scale(0);
            transition: opacity 0.3s, transform 0.3s;
            align-self: flex-end;
        }

        .reframe-main {
            font-size: 2.2rem;
            font-weight: 700;
            max-width: 800px;
            text-align: left;
            padding: 0;
            line-height: 1.4;
        }

        .word {
            opacity: 0;
            transition: opacity 0.3s;
            display: inline-block;
            position: relative;
        }

        .highlight {
            position: absolute;
            left: 0;
            top: 0;
            background-color: #FFFF00;
            padding: 0 2px;
            opacity: 0;
            transition: opacity 0.3s 0.2s;
            pointer-events: none;
        }

        /* New Product Showcase Section */
        .product-showcase {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s;
            background: white;
            z-index: 50;
        }

        .product-container {
            display: flex;
            height: 100vh;
            width: 400vw; /* 4 screens wide */
            transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .product-slide {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .product-image {
            width: 100vw;
            height: 80vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            color: #999;
            margin-bottom: 0;
        }

        .product-caption {
            position: absolute;
            bottom: 5vh;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            width: 80%;
            max-width: 900px;
        }

        .product-title {
            position: absolute;
            top: 4rem;
            left: 3rem;
            font-size: 2rem;
            font-weight: 400;
            text-align: left;
            color: #999;
        }

        .product-title::before {
            content: '[';
        }

        .product-title::after {
            content: ']';
        }

        .product-description {
            font-size: 1.1rem;
            max-width: 900px;
            margin: 0 auto;
        }

        .content-spacer {
            height: 800vh; /* Increased for better separation */
        }

        /* Benefits Section */
        .benefits-section {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: flex-start;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s;
            padding-left: 3rem;
        }

        .benefits-intro {
            font-size: 2.2rem;
            margin-bottom: 3rem;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s cubic-bezier(0.16, 1, 0.3, 1), transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            max-width: 75%;
        }

        .benefits-list {
            display: flex;
            flex-direction: column;
            gap: 2.8rem;
        }

        .benefit-item {
            font-size: 2.2rem;
            font-weight: 700;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s cubic-bezier(0.16, 1, 0.3, 1), transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
            margin-bottom: 0.5rem;
            white-space: normal;
            word-break: break-word;
        }

        .benefits-summary {
            font-size: 1.8rem;
            font-weight: 400;
            font-style: italic;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s cubic-bezier(0.16, 1, 0.3, 1), transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            margin-top: 3rem;
            text-align: center;
            max-width: 800px;
            padding: 0 1.5rem;
            will-change: opacity, transform;
        }

        /* Team Section */
        .team-section {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s;
            padding-top: 5rem;
        }

        .team-text {
            font-size: 2.2rem;
            font-weight: 400;
            max-width: 1000px;
            margin: 1.8rem 0;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s cubic-bezier(0.16, 1, 0.3, 1), transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            text-align: center;
            padding: 0 1.5rem;
            will-change: opacity, transform;
            line-height: 1.4;
            word-break: normal;
            overflow-wrap: break-word;
        }

        .typewriter-text {
            opacity: 0;
            transition: opacity 0.3s;
            display: inline-block;
            position: relative;
        }

        .blinking-period {
            opacity: 0;
            transition: opacity 0.3s;
            display: inline;
            margin: 0;
        }

        /* Final Section */
        .final-section {
            position: relative;
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 4rem 2rem;
            background: white;
        }

        .final-content {
            text-align: center;
            max-width: 600px;
        }

        .final-statement {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 0;
            max-width: 800px;
            text-align: center;
        }

        .ascii-logo {
            margin: 0;
        }

        .ascii-logo pre {
            font-family: 'Roboto Mono', monospace;
            font-size: 1rem;
            color: #999;
            margin: 0;
        }

        .pre-order-section {
            margin: 0;
        }

        .pre-order-text {
            font-size: 1.5rem;
            margin-bottom: 2rem;
        }

        .email-form {
            display: flex;
            gap: 1rem;
            justify-content: center;
            align-items: center;
            max-width: 400px;
            margin: 0 auto;
        }

        .email-form input {
            flex: 1;
            padding: 1rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-family: 'Roboto Mono', monospace;
            font-size: 1rem;
            background: white;
        }

        .email-form button {
            padding: 1rem 1.5rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            background: white;
            font-family: 'Roboto Mono', monospace;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .email-form button:hover {
            background-color: #f0f0f0;
        }

        .email-button {
            padding: 1rem 1.5rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            background: white;
            font-family: 'Roboto Mono', monospace;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
            color: black;
            text-decoration: none;
            display: inline-block;
        }

        .email-button:hover {
            background-color: #f0f0f0;
        }

        .contact-text {
            font-size: 1.2rem;
            margin-top: 3rem;
        }

        .contact-text a {
            color: black;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            background: white;
            font-family: 'Roboto Mono', monospace;
            font-size: 0.9rem;
            cursor: pointer;
            transition: background-color 0.3s;
            display: inline-block;
        }

        .contact-text a:hover {
            background-color: #f0f0f0;
            text-decoration: none;
        }

        .contact-button {
            background: none;
            border: none;
            font-family: 'Roboto Mono', monospace;
            font-size: 0.9rem;
            font-weight: 400;
            cursor: pointer;
            color: black;
            text-decoration: none;
            transition: opacity 0.3s;
        }

        .contact-button:hover {
            opacity: 0.7;
        }

        .svg-shift-up {
            margin-top: -3vh;
        }

        .svg-mobile-text {
            display: none;
        }

        @media (max-width: 600px) {
            header {
                padding: 0.5rem 0.7rem;
                font-size: 0.8rem;
            }
            .hero-content {
                margin-bottom: 2rem;
            }
            .outlined-text {
                font-size: 2.2rem;
                -webkit-text-stroke: 1px black;
            }
            .subtitle {
                font-size: 1rem;
                max-width: 95vw;
            }
            .problem-section {
                padding-top: 1.5rem;
                justify-content: center;
            }
            .problem-line {
                font-size: 1.1rem;
                max-width: 98vw;
                margin: 1.2rem 0;
                padding: 0 0.5rem;
            }
            .product-image {
                width: 100vw;
                height: 55vh;
                min-height: 200px;
                max-height: none;
            }
            .product-title {
                font-size: 1.1rem;
                top: 5.5rem;
                left: 1rem;
            }
            .product-caption {
                bottom: 2vh;
                width: 96vw;
                max-width: 98vw;
            }
            .product-description {
                font-size: 0.95rem;
                max-width: 98vw;
            }
            .reframe-section {
                padding-left: 1rem;
            }
            .reframe-line, .reframe-main {
                font-size: 1.1rem;
            }
            .benefits-section {
                padding-left: 1rem;
            }
            .benefits-intro, .benefit-item {
                font-size: 1.1rem;
                max-width: 98vw;
            }
            .team-text {
                font-size: 1.1rem;
                max-width: 98vw;
                padding: 0 0.5rem;
            }
            .final-statement {
                font-size: 1.1rem;
                max-width: 98vw;
            }
            .ascii-logo pre {
                font-size: 0.7rem;
            }
            .pre-order-text, .contact-text {
                font-size: 0.95rem;
            }
            .email-form input, .email-form button {
                font-size: 0.95rem;
                padding: 0.7rem;
            }
            .svg-mobile-text {
                display: block;
                font-size: 0.85rem;
                color: #222;
                text-align: center;
                margin: 0.2rem 0 0.2rem 0;
                font-family: 'Roboto Mono', monospace;
                line-height: 1.1;
            }
            .svg-slide-2, .svg-slide-4 {
                width: 180vw !important;
                height: 90vh !important;
                max-width: none !important;
                max-height: none !important;
                margin-left: 0vw;
            }
        }

        /* Custom modern black cross cursor for desktop */
        @media (pointer: fine) {
            html, body {
                cursor: url('data:image/svg+xml;utf8,<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><line x1="16" y1="4" x2="16" y2="28" stroke="black" stroke-width="2"/><line x1="4" y1="16" x2="28" y2="16" stroke="black" stroke-width="2"/></svg>') 16 16, crosshair;
            }
        }
    </style>
</head>
<body>
    <header>
        <button class="header-link" id="xylaButton">XYLA</button>
        <button class="header-link" id="contactButton">contact</button>
    </header>

    <div class="hero-container" id="heroContainer">
        <div class="hero-content" id="heroContent">
            <h1 class="outlined-text">XYLA ENGINEERING.</h1>
            <p class="subtitle" id="subtitle">portable farming systems to grow food anywhere</p>
        </div>
        <div class="arrow-container">
            <div class="scroll-arrow" id="scrollArrow">↓</div>
        </div>
    </div>

    <div class="problem-section" id="problemSection">
        <p class="problem-line">Over 800 million people face hunger worldwide.</p>
        <p class="problem-line">Up to 30% of global food is lost or wasted due to inefficient supply chains.</p>
        <p class="problem-line">Over 23 million Americans live in food deserts.</p>
        <p class="problem-line">Current farming systems are huge, bulky, and too slow to deploy or customize for urgent, local needs.</p>
    </div>

    <div class="reframe-section" id="reframeSection">
        <div class="reframe-container">
            <p class="reframe-line">So we thought</p>
            <div class="dots">
                <div class="dot" id="dot1"></div>
                <div class="dot" id="dot2"></div>
                <div class="dot" id="dot3"></div>
            </div>
        </div>
        <p class="reframe-main" id="reframeText">
            <span class="word">Why</span>
            <span class="word">depend</span>
            <span class="word">on</span>
            <span class="word">one</span>
            <span class="word">large</span>
            <span class="word">farm</span>
            <span class="word">when</span>
            <span class="word">multiple</span>
            <span class="word">small,</span>
            <span class="word">specialized</span>
            <span class="word">farms</span>
            <span class="word">can</span>
            <span class="word">do</span>
            <span class="word">it</span>
            <span class="word">
                better,
                <span class="highlight">better</span>
            </span>
            <span class="word">
                cheaper,
                <span class="highlight">cheaper</span>
            </span>
            <span class="word">and</span>
            <span class="word">
                faster?
                <span class="highlight">faster?</span>
            </span>
        </p>
    </div>

    <!-- New Product Showcase Section -->
    <div class="product-showcase" id="productShowcase">
        <div class="product-container" id="productContainer">
            <div class="product-slide">
                <h2 class="product-title">Welcome to xyla.</h2>
                <div class="product-image"><img class="svg-slide-1" src="assets/2.svg" alt="XYLA Top Down View" style="width:100%;height:100%;object-fit:contain;"></div>
                <div class="svg-mobile-text">[DIMENSIONS: 12 ftx 12 ft footprint]<br>[OUTPUT: same yield as a 1-acre farm for select crops.]</div>
                <div class="product-caption">
                    <p class="product-description">A fully closed loop modular farm system that scales from backyard plots to bukers to lunar outposts</p>
                </div>
            </div>
            <div class="product-slide">
                <h2 class="product-title">Pure modularity</h2>
                <div class="product-image"><img class="svg-slide-2" src="assets/3.svg" alt="XYLA Precision Growth" style="width:100%;height:100%;object-fit:contain;"></div>
                <div class="product-caption">
                    <p class="product-description">Modules swap out in under 3 minutes and collapse to one-third their size for easy storage</p>
                </div>
            </div>
            <div class="product-slide">
                <h2 class="product-title">Early, Late, and Pump modules</h2>
                <div class="product-image"><img class="svg-slide-3" src="assets/4.svg" alt="XYLA Scalable Design" style="width:100%;height:100%;object-fit:contain;"></div>
                <div class="product-caption">
                    <p class="product-description">Designed to grow 150+ plants while generating enough electricity for self-reliance.</p>
                </div>
            </div>
            <div class="product-slide">
                <h2 class="product-title">Reinventing farming.</h2>
                <div class="product-image"><img class="svg-slide-4" src="assets/5.svg" alt="XYLA Data Driven" style="width:100%;height:100%;object-fit:contain;"></div>
                <div class="product-caption">
                    <p class="product-description">Our NEW single-jet aeroponic tech cuts costs by 50% while maximizing growth efficiency.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Benefits Section -->
    <div class="benefits-section" id="benefitsSection">
        <p class="benefits-intro">This means, for the first time, we can grow plants anywhere without the need for:</p>
        <div class="benefits-list">
            <p class="benefit-item">Sunlight</p>
            <p class="benefit-item">External power sources</p>
            <p class="benefit-item">Soil</p>
            <p class="benefit-item">Water hookups</p>
        </div>
        <p class="benefits-summary">In a nutshell: deploy anywhere, no external infrastructure needed, in just 10 minutes.</p>
    </div>

    <!-- Team Section -->
    <div class="team-section" id="teamSection">
        <p class="team-text">
            <span class="typewriter-text" id="typewriterText">made with love by ex-NASA researchers, engineers, and founders.</span>
        </p>
    </div>

    <div class="content-spacer"></div>

    <!-- Final Section -->
    <div class="final-section" id="finalSection">
        <div class="final-content">
            <h2 class="final-statement">we grow food where it was never supposed to grow.</h2>
            
            <div class="ascii-logo">
                <pre>                                                     
                                                     
               @@@@@@@@@     @@@@@@@@@               
              @@@@@@@@@@     @@@@@@@@@@              
             @@@@@@               @@@@@@             
             @@@@@                 @@@@              
                                                    
                    @  @@@@@@@@@@                    
         @@@@      @@@  @@@@@@@@@@      @@@@@        
        @@@@@@    @@@@@  @@@@@@@@@@    @@@@@@@       
       @@@@@@    @@@@@@@  @@@@@@@@@@    @@@@@@@      
     @@@@@@@    @@@@@@@@@                @@@@@@@     
      @@@@@@@    @@@@@@@  @@@@@@@@@@    @@@@@@@      
       @@@@@@    @@@@@@ @@@@@@@@@@      @@@@@@       
        @@@        @@@@ @@@@@@@@@@      @@@@@        
                    @  @@@@@@@@@@                    
               @@                   @@               
            @@@@@@                 @@@@@@            
             @@@@@@               @@@@@@             
              @@@@@@@@@@     @@@@@@@@@@              
               @@@@@@@@@     @@@@@@@@@               
                                                     
                                                     </pre>
            </div>
            
            <div class="pre-order-section">
                <p class="pre-order-text">we're now taking pre-orders. shoot us an email for pricing + details.</p>
                
                <div class="email-form" id="emailForm">
                    <button type="button" class="email-button" onclick="window.location.href='mailto:xyla.engineering@gmail.com?subject=New Xyla Pre-order Request&body=Hi,%0D%0A%0D%0AI\'m interested in pre-ordering Xyla.%0D%0A%0D%0AThanks!'">→ pre-order</button>
                </div>
            </div>            
            
            <p class="contact-text">Want to chat? contact → <a href="mailto:xyla.engineering@gmail.com">xyla.engineering@gmail.com</a></p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Ensure page starts at the top when reloaded
            window.scrollTo(0, 0);
            document.documentElement.scrollTop = 0;
            document.body.scrollTop = 0;
            
            // Prevent scroll restoration
            if ('scrollRestoration' in history) {
                history.scrollRestoration = 'manual';
            }
            
            // Force scroll to top after a short delay
            setTimeout(() => {
                window.scrollTo(0, 0);
            }, 100);
            
            const heroContainer = document.getElementById('heroContainer');
            const heroContent = document.getElementById('heroContent');
            const scrollArrow = document.getElementById('scrollArrow');
            const subtitle = document.getElementById('subtitle');
            const problemSection = document.getElementById('problemSection');
            const problemLines = document.querySelectorAll('.problem-line');
            const reframeSection = document.getElementById('reframeSection');
            const dots = [document.getElementById('dot1'), document.getElementById('dot2'), document.getElementById('dot3')];
            const words = document.querySelectorAll('.word');
            const highlights = document.querySelectorAll('.highlight');
            const productShowcase = document.getElementById('productShowcase');
            const productContainer = document.getElementById('productContainer');
            const benefitsSection = document.getElementById('benefitsSection');
            const benefitsIntro = document.querySelector('.benefits-intro');
            const benefitItems = document.querySelectorAll('.benefit-item');
            const benefitsSummary = document.querySelector('.benefits-summary');
            const teamSection = document.getElementById('teamSection');
            const teamText = document.querySelector('.team-text');
            const typewriterText = document.getElementById('typewriterText');
            const blinkingPeriod = document.querySelector('.blinking-period');
            const finalSection = document.getElementById('finalSection');
            const finalStatement = document.querySelector('.final-statement');
            const asciiLogo = document.querySelector('.ascii-logo');
            const preOrderSection = document.querySelector('.pre-order-section');
            const contactText = document.querySelector('.contact-text');
            const emailForm = document.getElementById('emailForm');
            const emailInput = document.getElementById('emailInput');
            
            let lastScrollY = window.scrollY;
            let hasScrolled = false;
            let currentSection = 'hero';
            let isScrollingDown = true;
            let allWordsShown = false;
            let productSlideIndex = 0;
            let isInProductSection = false;
            let productScrollStart = 0;
            let typewriterStarted = false;
            let typewriterComplete = false;
            let typewriterIndex = 0;
            let typewriterInterval;
            let blinkingInterval;
            let previousSection = 'hero';

            function updateScroll() {
                const scrollY = window.scrollY;
                const scrollDirection = scrollY > lastScrollY ? 'down' : 'up';
                isScrollingDown = scrollDirection === 'down';
                lastScrollY = scrollY;
                
                const heroHeight = heroContainer.offsetHeight;
                const viewportHeight = window.innerHeight;
                const subtitleRect = subtitle.getBoundingClientRect();
                
                // Handle scroll direction changes
                if (scrollDirection === 'up') {
                    if (currentSection === 'team' && scrollY < productScrollStart + viewportHeight * 2.4) {
                        previousSection = currentSection;
                        currentSection = 'benefits';
                        teamSection.style.opacity = '0';
                        teamSection.style.pointerEvents = 'none';
                        benefitsSection.style.opacity = '1';
                        benefitsSection.style.pointerEvents = 'all';
                        resetTeam('benefits');
                    }
                    else if (currentSection === 'benefits' && scrollY < productScrollStart + viewportHeight * 1.2) {
                        previousSection = currentSection;
                        currentSection = 'product';
                        benefitsSection.style.opacity = '0';
                        benefitsSection.style.pointerEvents = 'none';
                        productShowcase.style.opacity = '1';
                        productShowcase.style.pointerEvents = 'all';
                        resetBenefits();
                    }
                    else if (currentSection === 'product' && scrollY < productScrollStart - viewportHeight * 0.3) {
                        previousSection = currentSection;
                        currentSection = 'reframe';
                        productShowcase.style.opacity = '0';
                        productShowcase.style.pointerEvents = 'none';
                        reframeSection.style.opacity = '1';
                        reframeSection.style.pointerEvents = 'all';
                        isInProductSection = false;
                    }
                    else if (currentSection === 'reframe' && scrollY < heroHeight * 1.8) {
                        previousSection = currentSection;
                        currentSection = 'problems';
                        reframeSection.style.opacity = '0';
                        problemSection.style.opacity = '1';
                        problemSection.style.transform = 'translateY(0)';
                        resetReframe();
                    }
                    else if (currentSection === 'problems' && scrollY < heroHeight * 0.3) {
                        previousSection = currentSection;
                        currentSection = 'hero';
                        problemSection.style.opacity = '0';
                        resetProblems();
                    }
                }
                
                // Hero section
                if (currentSection === 'hero') {
                    const scrollRatio = Math.min(scrollY / (heroHeight * 0.8), 1);
                    heroContent.style.transform = `translateY(${-scrollRatio * heroHeight * 0.7}px)`;
                    
                    // Fade out subtitle
                    const subtitleFadeStart = 0.6;
                    const subtitleFadeEnd = 0.8;
                    subtitle.style.opacity = scrollRatio > subtitleFadeStart ? 
                        (1 - (scrollRatio - subtitleFadeStart) / (subtitleFadeEnd - subtitleFadeStart)).toString() : 
                        '1';
                    
                    // Show/hide scroll arrow
                    if (scrollY > 10 && !hasScrolled) {
                        scrollArrow.classList.add('hidden');
                        hasScrolled = true;
                    } else if (scrollY <= 10 && hasScrolled) {
                        scrollArrow.classList.remove('hidden');
                        hasScrolled = false;
                    }

                    // Transition to problems
                    if (subtitleRect.top + subtitleRect.height < 0 && isScrollingDown) {
                        currentSection = 'problems';
                        problemSection.style.opacity = '1';
                    }
                }
                
                // Problem section
                if (currentSection === 'problems') {
                    const problemScrollStart = heroHeight * 0.8;
                    let scrollProgress = (scrollY - problemScrollStart) / (heroHeight * 1.3);
                    
                    if (scrollProgress < 0) scrollProgress = 0;
                    if (scrollProgress > 1) scrollProgress = 1;
                    
                    // Animate problem lines
                    const visibleLine = isScrollingDown ? 
                        Math.floor(Math.max(0, scrollProgress - 0.15) * problemLines.length) :
                        Math.ceil(scrollProgress * problemLines.length);
                    
                    problemLines.forEach((line, index) => {
                        if (index <= visibleLine) {
                            line.style.opacity = '1';
                            line.style.transform = 'translateY(0)';
                        } else {
                            line.style.opacity = '0';
                            line.style.transform = 'translateY(20px)';
                        }
                    });

                    // Transition to reframe
                    if (isScrollingDown && visibleLine >= problemLines.length - 1 && scrollProgress > 0.97) {
                        currentSection = 'reframe';
                        problemSection.style.transform = 'translateY(-100%)';
                        problemSection.style.opacity = '0';
                        reframeSection.style.opacity = '1';
                    }
                }
                
                // Reframe section
                if (currentSection === 'reframe') {
                    const reframeScrollStart = heroHeight * 2.0;
                    let scrollProgress = (scrollY - reframeScrollStart) / (heroHeight * 1.5);
                    
                    if (scrollProgress < 0) scrollProgress = 0;
                    if (scrollProgress > 1) scrollProgress = 1;
                    
                    // Animate dots
                    dots.forEach((dot, index) => {
                        if (scrollProgress > index * 0.15) {
                            dot.style.opacity = '1';
                            dot.style.transform = 'scale(1)';
                        } else {
                            dot.style.opacity = '0';
                            dot.style.transform = 'scale(0)';
                        }
                    });
                    
                    // Animate words
                    if (scrollProgress > 0.45) {
                        const wordProgress = Math.min((scrollProgress - 0.45) / 0.4, 1);
                        const wordsToShow = Math.floor(wordProgress * words.length);
                        
                        words.forEach((word, index) => {
                            if (index <= wordsToShow) {
                                word.style.opacity = '1';
                            } else {
                                word.style.opacity = '0';
                            }
                        });

                        // Show highlights
                        if (wordProgress >= 1) {
                            if (!allWordsShown) {
                                allWordsShown = true;
                            }
                            highlights.forEach(highlight => {
                                highlight.style.opacity = '1';
                            });
                        } else {
                            highlights.forEach(highlight => {
                                highlight.style.opacity = '0';
                            });
                            allWordsShown = false;
                        }
                    } else {
                        words.forEach(word => {
                            word.style.opacity = '0';
                        });
                        highlights.forEach(highlight => {
                            highlight.style.opacity = '0';
                        });
                        allWordsShown = false;
                    }

                    // Transition to product showcase
                    if (isScrollingDown && scrollProgress >= 1) {
                        currentSection = 'product';
                        productScrollStart = scrollY;
                        reframeSection.style.opacity = '0';
                        reframeSection.style.pointerEvents = 'none';
                        productShowcase.style.opacity = '1';
                        productShowcase.style.pointerEvents = 'all';
                        isInProductSection = true;
                    }
                }
                
                // Product showcase section
                if (currentSection === 'product') {
                    const scrollDistance = scrollY - productScrollStart;
                    const scrollProgress = Math.min(scrollDistance / (viewportHeight * 1.2), 1);
                    
                    // Calculate which slide to show (0-3)
                    const newSlideIndex = Math.min(3, Math.floor(scrollProgress * 4));
                    
                    if (newSlideIndex !== productSlideIndex) {
                        productSlideIndex = newSlideIndex;
                        productContainer.style.transform = `translateX(-${productSlideIndex * 25}%)`;
                    }

                    // Transition to benefits section
                    if (isScrollingDown && scrollProgress >= 1) {
                        currentSection = 'benefits';
                        benefitsSection.style.opacity = '1';
                        benefitsSection.style.pointerEvents = 'all';
                        productShowcase.style.opacity = '0';
                        productShowcase.style.pointerEvents = 'none';
                    }
                }

                // Benefits section
                if (currentSection === 'benefits') {
                    const benefitsScrollStart = productScrollStart + viewportHeight * 1.2;
                    let scrollProgress = (scrollY - benefitsScrollStart) / (viewportHeight * 1.2);
                    
                    if (scrollProgress < 0) scrollProgress = 0;
                    if (scrollProgress > 1) scrollProgress = 1;
                    
                    // Animate intro text
                    if (scrollProgress > 0.05) {
                        benefitsIntro.style.opacity = '1';
                        benefitsIntro.style.transform = 'translateY(0)';
                    } else {
                        benefitsIntro.style.opacity = '0';
                        benefitsIntro.style.transform = 'translateY(20px)';
                    }
                    
                    // Animate benefit items (fade in one by one)
                    benefitItems.forEach((item, index) => {
                        const itemStart = 0.15 + index * 0.12;
                        if (scrollProgress > itemStart) {
                            item.style.opacity = '1';
                            item.style.transform = 'translateY(0)';
                        } else {
                            item.style.opacity = '0';
                            item.style.transform = 'translateY(20px)';
                        }
                    });

                    // Animate benefits summary (appears after all items)
                    const summaryStart = 0.15 + benefitItems.length * 0.12 + 0.1;
                    if (scrollProgress > summaryStart) {
                        benefitsSummary.style.opacity = '1';
                        benefitsSummary.style.transform = 'translateY(0)';
                    } else {
                        benefitsSummary.style.opacity = '0';
                        benefitsSummary.style.transform = 'translateY(20px)';
                    }

                    // Transition to team section
                    if (isScrollingDown && scrollProgress >= 1) {
                        currentSection = 'team';
                        teamSection.style.opacity = '1';
                        teamSection.style.pointerEvents = 'all';
                        benefitsSection.style.opacity = '0';
                        benefitsSection.style.pointerEvents = 'none';
                    }
                }

                // Team section
                if (currentSection === 'team') {
                    const teamScrollStart = productScrollStart + viewportHeight * 2.4;
                    let scrollProgress = (scrollY - teamScrollStart) / (viewportHeight * 1.2);
                    
                    if (scrollProgress < 0) scrollProgress = 0;
                    if (scrollProgress > 1) scrollProgress = 1;
                    
                    // Animate team text
                    if (scrollProgress > 0.1) {
                        teamText.style.opacity = '1';
                        teamText.style.transform = 'translateY(0)';
                        typewriterText.style.opacity = '1';
                        
                        // Start typewriter effect only if not already completed
                        if (!typewriterStarted && !typewriterComplete) {
                            typewriterStarted = true;
                            startTypewriter();
                        }
                    } else {
                        teamText.style.opacity = '0';
                        teamText.style.transform = 'translateY(20px)';
                        // Don't hide typewriter text if it's already complete
                        if (!typewriterComplete) {
                            typewriterText.style.opacity = '0';
                        }
                    }
                }
            }
            
            function resetProblems() {
                problemLines.forEach(line => {
                    line.style.opacity = '0';
                    line.style.transform = 'translateY(20px)';
                });
                problemSection.style.transform = 'translateY(0)';
                subtitle.style.opacity = '1';
            }
            
            function resetReframe() {
                dots.forEach(dot => {
                    dot.style.opacity = '0';
                    dot.style.transform = 'scale(0)';
                });
                words.forEach(word => {
                    word.style.opacity = '0';
                });
                highlights.forEach(highlight => {
                    highlight.style.opacity = '0';
                });
                allWordsShown = false;
            }
            
            function resetBenefits() {
                benefitsIntro.style.opacity = '0';
                benefitsIntro.style.transform = 'translateY(20px)';
                benefitItems.forEach(item => {
                    item.style.opacity = '0';
                    item.style.transform = 'translateY(20px)';
                });
                benefitsSummary.style.opacity = '0';
                benefitsSummary.style.transform = 'translateY(20px)';
            }
            
            function resetTeam(nextSection) {
                teamText.style.opacity = '0';
                teamText.style.transform = 'translateY(20px)';
                // Do NOT reset typewriter text or state here. Let it persist after first animation.
            }
            
            function startTypewriter() {
                const fullText = "made with love by ex-NASA researchers, engineers, and founders.";
                typewriterText.textContent = '';
                typewriterIndex = 0;
                typewriterInterval = setInterval(() => {
                    if (typewriterIndex < fullText.length) {
                        typewriterText.textContent += fullText.charAt(typewriterIndex);
                        typewriterIndex++;
                    } else {
                        clearInterval(typewriterInterval);
                        typewriterComplete = true;
                        startBlinkingPeriod();
                    }
                }, 30);
            }
            
            function startBlinkingPeriod() {
                // Create a span for the period that can blink independently
                const textWithoutPeriod = typewriterText.textContent.slice(0, -1);
                typewriterText.innerHTML = textWithoutPeriod + '<span class="blinking-period">.</span>';
                
                const periodSpan = typewriterText.querySelector('.blinking-period');
                periodSpan.style.opacity = '1';
                
                blinkingInterval = setInterval(() => {
                    periodSpan.style.opacity = periodSpan.style.opacity === '1' ? '0' : '1';
                }, 500);
            }
            
            window.addEventListener('scroll', function() {
                requestAnimationFrame(updateScroll);
            });
            window.addEventListener('resize', updateScroll);
            
            // Force scroll to top when page loads
            window.addEventListener('load', function() {
                window.scrollTo(0, 0);
            });
            
            // Handle email form submission
            emailForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const email = emailInput.value;
                
                // For now, just log the email (in a real implementation, this would send to a server)
                console.log('Pre-order email submitted:', email);
                
                // You can replace this with actual email sending logic
                // For now, we'll use a simple mailto link
                //const mailtoLink = `mailto:founders@xyla.space?subject=XYLA Pre-order Request&body=New pre-order request from: ${email}`;
              //  window.open(mailtoLink);
                
                // Clear the form
                emailInput.value = '';
                
                // Show a simple confirmation
                alert('Thank you! We\'ll reach out soon.');
            });
            
            // Handle contact button click
            const contactButton = document.getElementById('contactButton');
            contactButton.addEventListener('click', function() {
                finalSection.scrollIntoView({ behavior: 'smooth' });
            });
            
            // Handle XYLA button click
            const xylaButton = document.getElementById('xylaButton');
            xylaButton.addEventListener('click', function() {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
            
            updateScroll();
            resetProblems();
            resetReframe();
            resetBenefits();
            resetTeam('hero');
        });
    </script>
</body>
</html>
